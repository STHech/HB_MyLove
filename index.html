<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday, MyLove</title>
<style>
  :root{
    /* smoother blue gradient */
    --bg1: #e6f7ff;
    --bg2: #b3e0ff;
    --accent: #06384d;
    --card: rgba(255,255,255,0.96);
    --glass: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.90));
    --shadow: 0 14px 50px rgba(2,18,30,0.12);
    --conf1: #d7f0ff; --conf2: #9fd6ff; --conf3: #4fb7ff; --confW: #ffffff;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, Poppins, system-ui, -apple-system, "Segoe UI", Roboto, Arial;color:var(--accent);
    background:linear-gradient(160deg,var(--bg1),var(--bg2)); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}

  /* subtle background Snoopy pattern */
  body::before{
    content:"";
    position:fixed;inset:0;z-index:-2;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900"><rect width="100%" height="100%" fill="%23e6f7ff"/><g transform="translate(0,0)"><g id="dog"><circle cx="40" cy="40" r="30" fill="%23fff"/><ellipse cx="30" cy="36" rx="5" ry="7" fill="%2306384d"/><ellipse cx="50" cy="36" rx="5" ry="7" fill="%2306384d"/><path d="M28 52 q12 10 24 0" stroke="%2306384d" stroke-width="3" fill="none" stroke-linecap="round" opacity="0.08"/></g></g></svg>');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity:0.95;
  }

  .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px;position:relative;z-index:2}
  .title{font-size:2rem;margin:0 0 12px;text-align:center;text-shadow:0 2px 8px rgba(0,0,0,0.06)}

  .intro{width:min(760px,94%);background:var(--card);padding:20px;border-radius:14px;box-shadow:var(--shadow);text-align:center;border:1px solid rgba(255,255,255,0.6)}
  .question{font-size:1.05rem;margin-bottom:8px}
  .btn-row{display:flex;gap:12px;justify-content:center;margin-top:12px}
  .btn{padding:12px 20px;border-radius:12px;border:0;cursor:pointer;font-weight:700;transition:transform .18s ease,box-shadow .18s ease,opacity .12s; background:linear-gradient(180deg,#fff,#f3fbff)}
  .btn.yes{background:linear-gradient(180deg,#72c8ff,#2b8fd6);color:#fff;box-shadow:0 10px 26px rgba(43,143,214,0.18)}
  .btn.no{color:var(--accent);background:linear-gradient(180deg,#fff,#f3fbff)}
  .grow{transform:scale(1.12) !important}
  @keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-10px) rotate(-6deg)}50%{transform:translateX(8px) rotate(6deg)}75%{transform:translateX(-6px) rotate(-3deg)}100%{transform:translateX(0)}}
  .shake{animation:shake .62s ease}

  .surprise{margin-top:26px;width:min(1120px,96%);display:grid;grid-template-columns:1fr 1fr 1fr;gap:18px;opacity:0;transform:translateY(10px);transition:opacity .6s ease,transform .6s ease;pointer-events:none}
  .surprise.visible{opacity:1;transform:translateY(0);pointer-events:auto}
  .card{background:var(--glass);border-radius:12px;padding:16px;min-height:240px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;position:relative;overflow:hidden;box-shadow:var(--shadow);border:1px solid rgba(255,255,255,0.7);transition:transform .18s ease}
  .card:hover{transform:translateY(-6px)}
  .card h3{margin:6px 0 8px 0;color:var(--accent)}
  .icon-img{width:86px;height:86px;border-radius:12px;object-fit:contain;box-shadow:0 8px 20px rgba(0,0,0,0.06);background:#fff;margin-top:8px;display:flex;align-items:center;justify-content:center;}
  .muted{color:rgba(0,50,80,0.6);font-size:.95rem}

  /* views */
  .view{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(.98);width:min(860px,94%);max-width:980px;height:min(720px,92%);background:var(--card);border-radius:14px;box-shadow:0 30px 80px rgba(3,20,40,0.22);padding:18px;display:none;flex-direction:column;z-index:60;overflow:auto;opacity:0;transition:opacity .36s ease,transform .36s ease}
  .view.show{display:flex;opacity:1;transform:translate(-50%,-50%) scale(1)}
  .back-dog{position:absolute;left:14px;top:14px;width:52px;height:52px;border-radius:10px;background:linear-gradient(#fff,#f3fbff);display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid rgba(0,0,0,0.06);z-index:70;box-shadow:0 8px 20px rgba(0,0,0,0.12)}
  .back-dog svg{width:44px;height:44px;display:block}

  .big-bouquet{width:100%;display:flex;flex-direction:column;align-items:center;gap:12px}
  .bouquet-img{max-width:520px;width:86%;height:auto;border-radius:14px;box-shadow:0 18px 40px rgba(0,0,0,0.14);border:6px solid rgba(255,255,255,0.94);background:#fff}
  .bouquet-caption{font-weight:600;color:var(--accent);margin-top:6px;text-align:center}

  .poem-text{white-space:pre-wrap;font-size:1.05rem;line-height:1.6;padding:12px;border-radius:10px;background:rgba(255,255,255,0.96);box-shadow:inset 0 4px 12px rgba(0,0,0,0.03)}

  .message-photo{max-width:360px;width:78%;height:auto;border-radius:12px;box-shadow:0 18px 40px rgba(0,0,0,0.12);border:5px solid rgba(255,255,255,0.9)}
  .message-text{
    white-space: pre-wrap;
    font-size:1.05rem;
    line-height:1.5;
    padding:12px;
    border-radius:10px;
    background:rgba(255,255,255,0.96);
    box-shadow:inset 0 4px 12px rgba(0,0,0,0.03);
    text-align:left;
    direction:ltr;
    unicode-bidi:plaintext;
  }

  .playful-note{font-size:0.95rem;color:rgba(0,40,60,0.75);margin-top:10px}

  @media (max-width:920px){.surprise{grid-template-columns:1fr}.view{width:min(94%,760px);height:min(86%,86vh)}}

  /* confetti canvas */
  canvas#confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:200}
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="wrap" id="wrap">
  <h1 class="title">A little surprise üíô</h1>

  <div class="intro" id="introCard" aria-hidden="false">
    <div class="question">Do you want to see it?</div>
    <div class="btn-row" role="group" aria-label="Choose yes or no">
      <button class="btn yes" id="yesBtn" aria-label="Yes">YES</button>
      <button class="btn no" id="noBtn" aria-label="No">NO</button>
    </div>
    <div class="playful-note">Good Day, Master.</div>
  </div>

  <div class="surprise" id="surpriseArea" aria-hidden="true">
    <div class="card" id="card1" data-box="1" role="button" tabindex="0" aria-label="Open Bouquet">
      <h3>üå∏ Bouquet</h3>
      <div class="icon-img" aria-hidden="true" id="icon1">
        <!-- dog icon -->
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="#fff"/><ellipse cx="25" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><ellipse cx="39" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><path d="M24 40 q8 6 16 0" stroke="#06384d" stroke-width="3" fill="none" stroke-linecap="round"/></svg>
      </div>
      <div class="bouquet-caption">Flowers for the Prettiest Master :P</div>
    </div>

    <div class="card" id="card2" data-box="2" role="button" tabindex="0" aria-label="Open Poem">
      <h3>‚úçÔ∏è Poem</h3>
      <div class="icon-img" id="icon2">
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="#fff"/><ellipse cx="25" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><ellipse cx="39" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><path d="M24 40 q8 6 16 0" stroke="#06384d" stroke-width="3" fill="none" stroke-linecap="round"/></svg>
      </div>
      <div class="muted" style="margin-top:12px"><strong>Poem for the best Poet</strong></div>
    </div>

    <div class="card" id="card3" data-box="3" role="button" tabindex="0" aria-label="Open Message">
      <h3>üíå Message</h3>
      <div class="icon-img" id="icon3">
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="#fff"/><ellipse cx="25" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><ellipse cx="39" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><path d="M24 40 q8 6 16 0" stroke="#06384d" stroke-width="3" fill="none" stroke-linecap="round"/></svg>
      </div>
      <div class="muted" style="margin-top:12px"><strong>Birthday message for Master</strong></div>
    </div>
  </div>
</div>

<!-- fixed assets (must upload these exact filenames to the repo) -->
<audio id="bgMusic" loop preload="auto"></audio>

<!-- Views -->
<div class="view" id="view1" aria-hidden="true" role="dialog" aria-label="Bouquet view">
  <div class="back-dog" id="back1" title="Back" role="button" aria-label="Back">
    <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="#fff"/><ellipse cx="25" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><ellipse cx="39" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><path d="M24 40 q8 6 16 0" stroke="#06384d" stroke-width="3" fill="none" stroke-linecap="round"/></svg>
  </div>
  <h2 style="text-align:center;margin-top:6px">üå∏ Bouquet</h2>
  <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:12px;padding:12px">
    <div class="big-bouquet">
      <img id="bouquetLarge" class="bouquet-img" src="bouquet.jpg" alt="Bouquet photo">
      <div class="bouquet-caption">Flowers for the Prettiest Master :P</div>
    </div>
  </div>
</div>

<div class="view" id="view2" aria-hidden="true" role="dialog" aria-label="Poem view">
  <div class="back-dog" id="back2" title="Back" role="button" aria-label="Back">
    <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="#fff"/><ellipse cx="25" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><ellipse cx="39" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><path d="M24 40 q8 6 16 0" stroke="#06384d" stroke-width="3" fill="none" stroke-linecap="round"/></svg>
  </div>
  <h2 style="text-align:center;margin-top:6px">‚úçÔ∏è Poem</h2>
  <div style="flex:1;padding:12px;overflow:auto;display:flex;flex-direction:column;gap:12px">
    <div class="poem-text" id="poemText">Roses blue, skies so true,
A smile that brightens every hue.
On this day I wish for you,
Laughter, love, and dreams come through.</div>
    <div style="display:flex;gap:10px;justify-content:center">
      <button class="btn" id="savePoem">Save Poem</button>
      <button class="btn" id="resetPoem">Reset</button>
    </div>
  </div>
</div>

<div class="view" id="view3" aria-hidden="true" role="dialog" aria-label="Message view">
  <div class="back-dog" id="back3" title="Back" role="button" aria-label="Back">
    <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="#fff"/><ellipse cx="25" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><ellipse cx="39" cy="28" rx="3.8" ry="5.6" fill="#06384d"/><path d="M24 40 q8 6 16 0" stroke="#06384d" stroke-width="3" fill="none" stroke-linecap="round"/></svg>
  </div>
  <h2 style="text-align:center;margin-top:6px">üíå Message</h2>
  <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px;gap:12px">
    <div id="typingArea" class="message-text" aria-live="polite"></div>
    <img id="msgPhoto" class="message-photo" src="photo.jpg" alt="Message photo">
  </div>
</div>

<script>
/* ------------------------
   Elements & config
   ------------------------ */
const yesBtn = document.getElementById('yesBtn');
const noBtn = document.getElementById('noBtn');
const introCard = document.getElementById('introCard');
const surpriseArea = document.getElementById('surpriseArea');

const card1 = document.getElementById('card1');
const card2 = document.getElementById('card2');
const card3 = document.getElementById('card3');

const view1 = document.getElementById('view1');
const view2 = document.getElementById('view2');
const view3 = document.getElementById('view3');

const back1 = document.getElementById('back1');
const back2 = document.getElementById('back2');
const back3 = document.getElementById('back3');

const bouquetLarge = document.getElementById('bouquetLarge');
const msgPhoto = document.getElementById('msgPhoto');

const bgMusic = document.getElementById('bgMusic');

const savePoem = document.getElementById('savePoem');
const resetPoem = document.getElementById('resetPoem');
const typingArea = document.getElementById('typingArea');

/* ------------------------
   Confetti (small helper)
   ------------------------ */
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext && canvas.getContext('2d');
let particles = [];
let lastTime = performance.now();
function resizeCanvas(){ if(canvas) { canvas.width = innerWidth; canvas.height = innerHeight; } }
resizeCanvas(); window.addEventListener('resize', resizeCanvas);
function spawnConfetti(count = 18){
  if(!ctx) return;
  const colors = [getComputedStyle(document.documentElement).getPropertyValue('--conf1').trim(),
                  getComputedStyle(document.documentElement).getPropertyValue('--conf2').trim(),
                  getComputedStyle(document.documentElement).getPropertyValue('--conf3').trim(),
                  getComputedStyle(document.documentElement).getPropertyValue('--confW').trim()];
  const originX = innerWidth * 0.5;
  const originY = innerHeight * 0.12;
  for(let i=0;i<count;i++){
    particles.push({
      x: originX + (Math.random()-0.5)*240,
      y: originY + (Math.random()-0.5)*40,
      vx: (Math.random()-0.5) * 6,
      vy: Math.random()*2 + 2,
      ang: Math.random()*Math.PI*2,
      va: (Math.random()-0.5)*0.2,
      size: Math.random()*10 + 6,
      color: colors[Math.floor(Math.random()*colors.length)],
      shape: Math.random()>0.6 ? 'circle' : 'rect',
      life: 0,
      ttl: Math.random()*2.8 + 2.4
    });
  }
  if(particles.length && !animating) { animating = true; requestAnimationFrame(loop); }
}
let animating = false;
function update(dt){
  for(let i = particles.length-1; i >= 0; i--){
    const p = particles[i];
    p.vy += 9.8 * 80 * dt * 0.01;
    p.x += p.vx * dt * 60;
    p.y += p.vy * dt * 60;
    p.ang += p.va;
    p.life += dt;
    if(p.life > p.ttl || p.y > canvas.height + 60) particles.splice(i,1);
  }
}
function draw(){
  if(!ctx) return;
  ctx.clearRect(0,0,canvas.width, canvas.height);
  particles.forEach(p=>{
    ctx.save();
    ctx.translate(p.x, p.y);
    ctx.rotate(p.ang);
    ctx.globalAlpha = Math.max(0, 1 - p.life / p.ttl);
    ctx.fillStyle = p.color;
    if(p.shape === 'circle') {
      ctx.beginPath(); ctx.arc(0,0,p.size/2,0,Math.PI*2); ctx.fill();
    } else {
      ctx.fillRect(-p.size/2, -p.size/3, p.size, p.size*0.66);
    }
    ctx.restore();
  });
}
function loop(now){
  const dt = Math.min(0.05, (now - lastTime)/1000);
  lastTime = now;
  update(dt);
  draw();
  if(particles.length>0) requestAnimationFrame(loop);
  else animating = false;
}

/* ------------------------
   Text / Message content
   ------------------------ */
const messageText = `To my "Dito Sa'kin", "Binhi", "Alipin", "Passenger Seat", "Di nakakasawa", and now my "Seasons", Happy Birthday! üéâ It is an honor to be part of your life and to get to know you. I hope it has been a great year for you.

May this day be as special as you are. Know that I'll always pray for this year and all the years to come to be gentle and full of love for you. Hopefully, A year with a more not so scary version of you. A year with a much caring version of you. Nevertheless, I'll always treasure every version of you‚Äîthe known and the unknown. Every scary. Every brave. Every silent. Every loud. Every weak. Every strong. Every happy. Every sad. Every worried. Every proud. Every mad. Every calm. Every clueless. Every carefree. And all the versions of you yet to unfold. 

Therefore, my gift for you is my genuine love‚Äîthe greatest gift you'll ever receive, because it is the love that surpasses all. 

Again, Happy Birthday, Master.`;

/* ------------------------
   Helper: safely show views
   ------------------------ */
function showView(viewEl){
  // close any open
  [view1,view2,view3].forEach(v=>{
    v.classList.remove('show');
    v.setAttribute('aria-hidden','true');
  });
  viewEl.classList.add('show');
  viewEl.setAttribute('aria-hidden','false');
}

/* ------------------------
   Yes/No behavior
   ------------------------ */
yesBtn.addEventListener('click', ()=>{
  // start music (user click counts as interaction)
  try {
    bgMusic.pause();
    bgMusic.currentTime = 0;
  } catch(e){}
  bgMusic.play().catch(()=>{ /* autoplay may be blocked in some browsers, but user clicked so usually allowed */});
  // reveal boxes
  introCard.style.display = 'none';
  surpriseArea.classList.add('visible');
  spawnConfetti(20);
});

let moveInterval;
noBtn.addEventListener('mouseenter', ()=>{
  noBtn.classList.add('shake');
  setTimeout(()=> noBtn.classList.remove('shake'),620);
});
noBtn.addEventListener('mousemove', ()=>{
  clearInterval(moveInterval);
  moveInterval = setInterval(()=>{
    const x = Math.random() * 220 - 110;
    const y = Math.random() * 120 - 60;
    noBtn.style.transform = `translate(${x}px, ${y}px)`;
  }, 260);
});
noBtn.addEventListener('mouseleave', ()=>{
  clearInterval(moveInterval);
  noBtn.style.transform = `translate(0,0)`;
});
noBtn.addEventListener('click', ()=>{
  alert("Aww‚Ä¶ wrong answer üòú Try again, Master!");
  // leave intro visible so they can try again
});

/* ------------------------
   Cards -> show views
   ------------------------ */
card1.addEventListener('click', ()=> {
  showView(view1);
  spawnConfetti(12);
});
card2.addEventListener('click', ()=> {
  showView(view2);
});
card3.addEventListener('click', ()=> {
  showView(view3);
  startTyping();
});

/* ------------------------
   Back buttons
   ------------------------ */
back1.addEventListener('click', ()=> { view1.classList.remove('show'); view1.setAttribute('aria-hidden','true');});
back2.addEventListener('click', ()=> { view2.classList.remove('show'); view2.setAttribute('aria-hidden','true');});
back3.addEventListener('click', ()=> { view3.classList.remove('show'); view3.setAttribute('aria-hidden','true');});

/* ------------------------
   Poem save/reset (local only)
   ------------------------ */
savePoem.addEventListener('click', ()=> { alert('Poem saved locally!') });
const originalPoem = document.getElementById('poemText').textContent;
resetPoem.addEventListener('click', ()=> { document.getElementById('poemText').textContent = originalPoem; });

/* ------------------------
   Typing effect for message (avoid parallel runs)
   ------------------------ */
let typingRunning = false;
function startTyping(){
  if(typingRunning) return;
  typingRunning = true;
  typingArea.textContent = '';
  let i = 0;
  function step(){
    if(i < messageText.length){
      typingArea.textContent += messageText.charAt(i);
      i++;
      // small dynamic delays
      let delay = 28;
      if (messageText.charAt(i-1) === ' ') delay = 12;
      if (/\p{Emoji}/u.test(messageText.charAt(i-1))) delay = 220;
      setTimeout(step, delay);
    } else {
      typingRunning = false;
      spawnConfetti(18);
    }
  }
  step();
}

/* ------------------------
   Preload & play music when Yes clicked
   ------------------------ */
(function initAudio(){
  // set source to your uploaded file (must exist in repo root)
  bgMusic.src = 'song.mp4';
  bgMusic.preload = 'auto';
  bgMusic.loop = true;
})();

/* ------------------------
   Confetti loop already handled above
   ------------------------ */
</script>
</body>
</html>
